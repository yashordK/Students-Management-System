<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Modern Animated Login Form</title>
  <link rel="stylesheet" href="./style.css">



</head>
<body>
<!-- partial:index.partial.html -->
<div class="box">
  <div class="login">
    <div class="loginBx">
      <h2>
        <i class="fa-solid fa-right-to-bracket"></i>
        Login
        <!-- <i class="fa-solid fa-heart"></i> -->
      </h2>
      <form id="loginForm">
        <input type="text" id ="username" name="username" placeholder="Username">
        <input type="password" id ="password" name="password" placeholder="Password">
        <input type="submit" value="Sign in" />
        <div class="group">
          <a href="#">Forgot Password</a>
          <a href="#">Sign up</a>

      </form>
      </div>
    </div>
  </div>
</div>
<div class="img">
  
  <img src="../Login/SUAS-logo (1).png" alt="SUAS Logo">
</div>
<!-- partial -->
  

<script>
  document.getElementById("loginForm").addEventListener("submit", async function(event) {
      event.preventDefault();

      const username = document.getElementById("username").value;
      const password = document.getElementById("password").value;

      const response = await fetch("http://127.0.0.1:8000/auth/login", {
          method: "POST",
          headers: {
              "Content-Type": "application/json"
          },
          body: JSON.stringify({ username, password })
      });

      const data = await response.json();
      if (response.ok) {
          localStorage.setItem("token", data.access_token);
          alert("Login successful!");
          window.location.href = "../Student/Dashboard2.html"; // Redirect to dashboard
      } else {
          alert("Invalid credentials");
      }
  });
</script>


</body>
</html>
